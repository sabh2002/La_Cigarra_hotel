{% load static %}
<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<meta name="description" content="Reservaciones para el Motel La Cigarra" />
		<title>Motel La Cigarra | {% block title %} Inicio{% endblock %}</title>
		<!-- Favicon -->
		<link rel="icon" type="image/x-icon" href=" {% static 'MenuBase/img/hotel.ico' %}" />

		<!-- Font Awesome -->
		<link rel="stylesheet" href="{% static 'MenuBase/vendor/libs/fontawesome-free/css/all.min.css' %}">
		<!-- DataTables -->
		<link rel="stylesheet" href="{% static 'MenuBase/vendor/libs/datatables-bs4/css/dataTables.bootstrap4.min.css' %} ">
		<link rel="stylesheet" href="{% static 'MenuBase/vendor/libs/datatables-responsive/css/responsive.bootstrap4.min.css' %} ">
		<link rel="stylesheet" href="{% static 'MenuBase/vendor/libs/datatables-buttons/css/buttons.bootstrap4.min.css' %} ">
		<!-- toars -->
		<link rel="stylesheet" href="{% static 'MenuBase/vendor/libs/toastr/toastr.min.css' %} ">
		<!-- jquery confirm -->
		<link rel="stylesheet" href="{% static 'MenuBase/vendor/libs/jquery-confirm-v3/jquery-confirm.min.css' %} ">
		<link rel="stylesheet" href="{% static 'MenuBase/vendor/libs/jquery-ui/jquery-ui.min.css' %}">

		<!-- Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet"/>

		<!-- Icons. Uncomment required icon fonts -->
		<link rel="stylesheet" href=" {% static 'MenuBase/vendor/fonts/boxicons.css' %}" />
		
		<!-- Core CSS -->
		<link rel="stylesheet" href=" {% static 'MenuBase/vendor/css/core.css' %}" class="template-customizer-core-css" />
		<link rel="stylesheet" href=" {% static 'MenuBase/vendor/css/theme-default.css' %} " class="template-customizer-theme-css" />
		<link rel="stylesheet" href=" {% static 'MenuBase/css/demo.css' %} " />

		<!-- Vendors CSS -->
		<script src=" {% static 'MenuBase/vendor/js/helpers.js' %} "></script>
		<link rel="stylesheet" href=" {% static 'MenuBase/vendor/css/pages/page-misc.css' %}" />
		{% block link %} {% endblock %}
	</head>

	<body>
		<!-- Layout wrapper -->
		<div class="layout-wrapper layout-content-navbar">
			<div class="layout-container">
				<!-- Menu -->

				<aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
					<img src="{% static 'MenuBase/img/hotel.jpeg' %}" alt="">
					<div class="menu-inner-shadow"></div>

					<ul class="menu-inner py-1">
						<!-- Dashboard -->
						<li class="menu-item">
							<a href="{% url 'reservacion:menu' %}" class="menu-link">
								<i class="menu-icon tf-icons bx bx-home-circle"></i>
								<div data-i18n="Analytics">Inicio</div>
							</a>
						</li>

						<!--Clientes-->
						{% if request.user.is_staff %}
						<li class="menu-item">
							<a href="{% url 'reservacion:clientes' %}" class="menu-link">
								<i class='menu-icon tf-icons bx bxs-user-badge'></i>
								<div data-i18n="Analytics">Clientes</div>
							</a>
						</li>
						{% endif %}
						<!-- Reservaciones -->

						{% if request.user.is_staff %}
							<li class="menu-item">
							<a href="{% url 'reservacion:reservacion' %}" class="menu-link">
								<i class="menu-icon tf-icons bx bx-notepad"></i>
								<div data-i18n="Analytics">Reservaciones</div>
							</a>
						</li>
						{% else %}
							<li class="menu-item">
								<a href="javascript:void(0);" class="menu-link menu-toggle">
									<i class="menu-icon tf-icons bx bx-notepad"></i>
									<div data-i18n="Layouts">Reservaciones</div>
								</a>
								<ul class="menu-sub">
									<li class="menu-item">
										<a href="{% url 'reservacion:new_reservacion' %}" class="menu-link">
											<div data-i18n="Container">Reservar</div>
										</a>
									</li>
									<li class="menu-item">
										<a href="{% url 'reservacion:mi_reservacion' %}" class="menu-link">
											<div data-i18n="Container">Mis Reservaciones</div>
										</a>
									</li>
								</ul>
							</li>
						{% endif %}

						{% if request.user.is_staff %}
						<!--Habitaciones-->
						<li class="menu-item">
							<a href="{% url 'reservacion:habitacion' %}" class="menu-link">
								<i class='menu-icon tf-icons bx bxs-door-open'></i>
								<div data-i18n="Analytics">Habitaciones</div>
							</a>
						</li>

						<!--Inventario-->
						<li class="menu-item">
							<a href="{% url 'reservacion:inventario' %}" class="menu-link">
								<i class="menu-icon tf-icons bx bx-package"></i>
								<div data-i18n="Analytics">Inventario</div>
							</a>
						</li>

						<!--Ventas-->
						<li class="menu-item">
							<a href="{% url 'reservacion:ventas_list' %}" class="menu-link">
								<i class='menu-icon tf-icons bx bx-wallet-alt' ></i>
								<div data-i18n="Analytics">Ventas</div>
							</a>
						</li>
						<!--reportes-->
						<li class="menu-item">
							<a href="{% url 'reservacion:reportes' %}" class="menu-link">
								<i class="menu-icon tf-icons fas fa-file-pdf"></i>
								<div data-i18n="Analytics">Reportes</div>
							</a>
						</li>
						<li class="menu-header small text-uppercase">
			              <span class="menu-header-text">Administración</span>
			            </li>
						<li class="menu-item">
							<a href="{% url 'reservacion:admin_register' %}" class="menu-link">
								<i class='menu-icon tf-icons bx bxs-user-detail'></i>
								<div data-i18n="Analytics">Empleados</div>
							</a>
						</li>
						<li class="menu-item">
							<a href="{% url 'reservacion:pago_movil' %}" class="menu-link">
								<i class="menu-icon tf-icons fas fa-mobile"></i>
								<div data-i18n="Analytics">Datos PagoMovil</div>
							</a>
						</li>
							{% if request.path == '/inicio/' %}
							<li class="menu-item">
								<a href="#" class="menu-link" onclick="abrir_modal_dolar();">
									<i class="menu-icon tf-icons fas fa-dollar-sign"></i>
									<div data-i18n="Analytics">Precio del Dolar</div>
								</a>
							</li>		
							{% endif %}				
						{% endif %}
					</ul>
				</aside>
				<!-- / Menu -->

				<!-- Layout container -->
				<div class="layout-page">
					<!-- Navbar -->

					<nav
						class="layout-navbar container-fluid navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme"
						id="layout-navbar"
					>
						<div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
							<a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
								<i class="bx bx-menu bx-sm"></i>
							</a>
						</div>

						<div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
							<div class="nav-item d-flex align-items-center">
						  		<h5 class="navbar-nav align-items-center">¡ Buen día !, {{request.user.nombre }} {{request.user.apellido }}</h5>
						  	</div>
						  	
						  	<style type="text/css">
						  		@media screen and (max-width: 1200px) {
									#f_barra{
										display:none;
									}
								}
						  	</style>

							<ul class="navbar-nav flex-row align-items-center ms-auto">
								<li class="nav-item p-3" id="f_barra">
									<h5 class="navbar-nav">
										<script>
											document.write(new Date().getDate() + "/");
											document.write(new Date().getMonth() + 1 + "/");
											document.write(new Date().getFullYear());
								  		</script>
										<span style="color: white;">..</span>
										<div id="reloj" class="reloj"> 00 : 00 : 00 </div>
									</h5> 
								</li>
								<!-- User -->
								<li class="nav-item navbar-dropdown dropdown-user dropdown">
									<a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
										<div class="avatar">
											<img src="{% static 'MenuBase/img/user_icon.png' %}" alt class="w-px-40 h-auto rounded-circle" />
										</div>
									</a>
									<ul class="dropdown-menu dropdown-menu-end">
										<li>
											<a class="dropdown-item" href="#">
												<div class="d-flex">
													<div class="flex-shrink-0 me-3">
														<div class="avatar avatar-online">
															<img src="{% static 'MenuBase/img/user_icon.png' %}" alt class="w-px-40 h-auto rounded-circle" />
														</div>
													</div>
													<div class="flex-grow-1">
														<span class="fw-semibold d-block">{{request.user.nombre}} {{request.user.apellido}}</span>
														{% if request.user.is_staff %}
															<small class="text-muted">Administrador</small>
														{% else %}
															<small class="text-muted">Cliente</small>
														{% endif %}
													</div>
												</div>
											</a>
										</li>
										<li>
											<div class="dropdown-divider"></div>
										</li>
										<li>
											<a class="dropdown-item" href="{% url 'logout' %}">
												<i class="bx bx-power-off me-2"></i>
												<span class="align-middle">Salir</span>
											</a>
										</li>
									</ul>
								</li>
								<!--/ User -->
							</ul>
						</div>
					</nav>

					<!-- / Navbar -->

					<!-- Content wrapper -->
					<div class="content-wrapper">
						<!-- Content -->

						<div class="container-fluid flex-grow-1 container-p-y">
							{% block content %}
							{% endblock %}
						</div>
						<!-- / Content -->

						<!-- Footer -->
						<footer class="content-footer footer bg-footer-theme">
							<div class="container-fluid d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
								<div class="mb-2 mb-md-0">
									©
									<script>
										document.write(new Date().getFullYear());
									</script>
									, Motel
									<p class="footer-link fw-bolder">La Cigarra</p> <br>
									<a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
							            <img alt="Licencia de Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />Este obra está bajo una <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">licencia de Creative Commons Reconocimiento 4.0 Internacional
							          </a>
								</div>
							</div>
						</footer>
						<!-- / Footer -->

						<div class="content-backdrop fade"></div>
					</div>
					<!-- Content wrapper -->
				</div>
				<!-- / Layout page -->
			</div>

			<!-- Overlay -->
			<div class="layout-overlay layout-menu-toggle"></div>
		</div>
		<!-- / Layout wrapper -->


			<!-- Modales -->

	<div class="col-lg-4 col-md-3">
		<!-- Modal -->
		<div class="modal fade" id="modal_dolar" data-bs-backdrop="static" tabindex="-1" aria-hidden="true" style="display: none;">
		  <div class="modal-dialog">
			<form class="modal-content" id="dolar_form">{% csrf_token %}
				{% if dolar %}
					<input type="hidden" name="action" value="editar_precio_dolar">
					<input type="hidden" name="id" value="dolar">
				{% else %}
					<input type="hidden" name="action" value="precio_dolar">
				{% endif %}
			  <div class="modal-header">
				<h5 class="modal-title" id="backDropModalTitle">Administrar precio del Dolar</h5>
				<button type="button" class="btn-close" onclick="cerrar_modal_dolar();"></button>
			  </div>
			  <div class="modal-body">
				<div class="row">
				  <div class="col mb-3">
					<label for="id_precio" class="form-label">Valor actual </label>
					<input type="text" class="form-control" value="{{dolar.precio}}" readonly>
				  </div>
				  <div class="col mb-3">
				  	<label for="id_precio" class="form-label">Nuevo valor del dolar </label>
					<input type="number" step="0.01" min="0" onkeypress="return Solo_Numero(event);" id="id_precio" name="precio" class="form-control" placeholder="Precio del dolar"
					 required>
				  </div>
			  </div>
			  <div class="modal-footer">
				<button type="button" class="btn btn-outline-secondary" onclick="cerrar_modal_dolar();">
				  Cerrar
				</button>
				<button type="submit" class="btn btn-primary">Guardar</button>
			  </div>
			</form>
		  </div>
		</div>
	  </div>
	</div>

		<!--SCRIPTS-->

		<!-- build:js assets/vendor/js/core.js -->
		<script src="{% static 'MenuBase/vendor/libs/jquery/jquery.min.js' %}"></script>
		<script src="{% static 'MenuBase/vendor/libs/popper/popper.js' %}"></script>
		<script src="{% static 'MenuBase/vendor/js/bootstrap.js' %}"></script>
		<script src="{% static 'MenuBase/vendor/js/menu.js' %}"></script>
		<script src="{% static 'MenuBase/js/pages/js_base.js' %}"></script>
		<!-- Main JS -->
		<script src="{% static 'MenuBase/js/main.js' %}"></script>
		<!-- toars -->
		<script type="text/javascript" src="{% static 'MenuBase/vendor/libs/toastr/jquery-3.7.0.min.js' %}"></script>
		<script type="text/javascript" src="{% static 'MenuBase/vendor/libs/toastr/toastr.min.js' %}"></script>
		<!-- jquery confirm -->
		<script type="text/javascript" src="{% static 'MenuBase/vendor/libs/jquery-confirm-v3/jquery-confirm.min.js' %}"></script>
		<script src="{% static 'MenuBase/vendor/libs/jquery-ui/jquery-ui.min.js' %}"></script>
		<!--DATATABLES-->
		<script src=" {% static 'MenuBase/vendor/libs/datatables/jquery.dataTables.min.js' %}"></script>
		<script src=" {% static 'MenuBase/vendor/libs/datatables-bs4/js/dataTables.bootstrap4.min.js' %} "></script>
		<script src=" {% static 'MenuBase/vendor/libs/datatables-responsive/js/dataTables.responsive.min.js' %} "></script>
		<script src=" {% static 'MenuBase/vendor/libs/datatables-responsive/js/responsive.bootstrap4.min.js' %} "></script>
				
		<script>
			{% if messages %}
				{% for mensaje in messages %}
				{% if mensaje.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
					function mensaje(sms) {
					toastr.error(sms)
					}
					mensaje('{{ mensaje }}')
				{% else %}
					function mensaje(sms) {
					toastr.success(sms)
					}
					mensaje('{{ mensaje }}')
				{% endif %}
				{% endfor %}
			{% endif %}
	    </script>
	    <script type="text/javascript">
			function actual() {
	         fecha=new Date(); //Actualizar fecha.
	         hora=fecha.getHours(); //hora actual
	         minuto=fecha.getMinutes(); //minuto actual
	         segundo=fecha.getSeconds(); //segundo actual
	         if (hora<10) { //dos cifras para la hora
	            hora="0"+hora;
	            }
	         if (minuto<10) { //dos cifras para el minuto
	            minuto="0"+minuto;
	            }
	         if (segundo<10) { //dos cifras para el segundo
	            segundo="0"+segundo;
	            }
	         //ver en el recuadro del reloj:
	         mireloj = hora+" : "+minuto+" : "+segundo;	
					 return mireloj; 
	         }

	         function actualizar() { //función del temporizador
			   mihora=actual(); //recoger hora actual
			   mireloj=document.getElementById("reloj"); //buscar elemento reloj
			   mireloj.innerHTML=mihora; //incluir hora en elemento
				 }
			setInterval(actualizar,1000); //iniciar temporizador
		</script>

	    {% block js %}

	    {% endblock %}
	    <script async defer src="https://buttons.github.io/buttons.js"></script>
	</body>
</html>
