{% load static %}
<html
	lang="es"
	class="light-style customizer-hide"
>
	<head>
		<meta charset="utf-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
		/>

		<title>Motel La Cigarra | Registrarse</title>

		<meta name="description" content="" />

		<!-- Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
			rel="stylesheet"
		/>

		<!-- Icons. Uncomment required icon fonts -->
		<link rel="stylesheet" href="{% static 'MenuBase/vendor/fonts/boxicons.css' %}" />

		<!-- Core CSS -->
		<link rel="stylesheet" href="{% static 'MenuBase/vendor/css/core.css' %}" class="template-customizer-core-css" />
		<link rel="stylesheet" href="{% static 'MenuBase/vendor/css/theme-default.css' %}" class="template-customizer-theme-css" />
		<link rel="stylesheet" href="{% static 'MenuBase/css/demo.css' %}" />

		<!-- jquery confirm -->
		<link rel="stylesheet" href=" {% static 'MenuBase/vendor/libs/jquery-confirm-v3/jquery-confirm.min.css' %} ">
		<link rel="stylesheet" href="{% static 'MenuBase/vendor/libs/jquery-ui/jquery-ui.min.css' %}">

		<!-- Vendors CSS -->
		<link rel="stylesheet" href="{% static 'MenuBase/vendor/libs/perfect-scrollbar/perfect-scrollbar.css' %}" />
		<!-- toars -->
		<link rel="stylesheet" href="{% static 'MenuBase/vendor/libs/toastr/toastr.min.css' %} ">

		<!-- Page CSS -->
		<!-- Page -->
		<link rel="stylesheet" href="{% static 'MenuBase/vendor/css/pages/page-auth.css' %}" />
		<!-- Helpers -->
		<script src="{% static 'MenuBase/vendor/js/helpers.js' %}"></script>

		<!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
		<!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
		<script src="{% static 'MenuBase/js/config.js' %}"></script>
	</head>

	<body>
		<!-- Content -->

		<div class="container-xxl">
			<div class="authentication-wrapper authentication-basic container-p-y">
				<div class="authentication-inner">
					<!-- Register -->
					<div class="card">
						<div class="card-body">
							<!-- Logo -->
							<div class="app-brand justify-content-center">
								<img src="{% static 'MenuBase/img/hotel.jpeg' %}" style="height: 150px; width: 150px;" alt="">
							</div>
							<!-- /Logo -->
							<h4 class="mb-2">Bienvenidos al Motel La Cigarra</h4>
							<p class="mb-4">Por favor crea una cuenta</p>

							<form id="form_register" class="mb-3" method="post"> {% csrf_token %}
								<input type="hidden" name="action" value="registrar_cliente">
								<div class="mb-3">
									<label for="cedula" class="form-label">Cedula</label>
									<input type="text" class="form-control" id="cedula" name="cedula" placeholder="Ingrese su cedula" autofocus required onkeypress="return Solo_Numero_ci(event);" maxlength="8" minlength="8" />
								</div>
								<div class="mb-3">
									<label for="nombre" class="form-label">Nombre</label>
									<input type="text" class="form-control" id="nombre" name="nombre" placeholder="Ingrese su Nombre" onkeypress="return Solo_Texto(event);" required maxlength="50" />
								</div>
								<div class="mb-3">
									<label for="apellido" class="form-label">Apellido</label>
									<input type="text" class="form-control" id="apellido" name="apellido" placeholder="Ingrese su Apellido" onkeypress="return Solo_Texto(event);" required maxlength="50" />
								</div>
								<div class="mb-3">
									<label for="direccion" class="form-label">Direccion</label>
									<input type="text" class="form-control" id="direccion" name="direccion" placeholder="Ingrese su Direccion" onkeypress="return Texto_Numeros(event);" required maxlength="100" />
								</div>
								<div class="mb-3">
									<label for="telefono" class="form-label">Telefono</label>
									<input type="text" class="form-control" id="telefono" name="telefono" placeholder="Ingrese su Telefono" onkeypress="return Solo_Numero_ci(event);" maxlength="11" minlength="11" required />
								</div>
								<div class="mb-3 form-password-toggle">
									<div class="d-flex justify-content-between">
										<label class="form-label" for="password">Contraseña</label>
									</div>
									<div class="input-group input-group-merge">
										<input type="password" id="password" class="form-control" name="password" minlength="6" placeholder="&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;" aria-describedby="password" required/>
										<span class="input-group-text cursor-pointer"><i class="bx bx-hide"></i></span>
									</div>
								</div>
								<div class="mb-3 form-password-toggle">
									<div class="d-flex justify-content-between">
										<label class="form-label" for="password2">Confirmar contraseña</label>
									</div>
									<div class="input-group input-group-merge">
										<input type="password" id="id_password2" class="form-control" name="password2" minlength="6" placeholder="&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;" aria-describedby="password" required/>
										<span class="input-group-text cursor-pointer"><i class="bx bx-hide"></i></span>
									</div>
								</div>

								<div class="mb-3">
									<button type="submit" class="btn btn-primary d-grid w-100">Registrarse</button>
								</div>
							</form>

							<p class="text-center">
								<span>Ya tienes una cuenta?</span>
								<a href="{% url 'login' %}">
									<span>Ingresa</span>
								</a>
							</p>
						</div>
					</div>
					<!-- /Register -->
				</div>
			</div>
		</div>

		<script src=" {% static 'MenuBase/vendor/libs/jquery/jquery.js' %} "></script>
		<script src=" {% static 'MenuBase/vendor/libs/popper/popper.js' %}"></script>
		<script src=" {% static 'MenuBase/vendor/js/bootstrap.js' %}"></script>
		<script src=" {% static 'MenuBase/vendor/js/menu.js' %} "></script>
		<script type="text/javascript" src="{% static 'MenuBase/vendor/libs/toastr/toastr.min.js' %}"></script>
		<!-- Main JS -->
		<script src=" {% static 'MenuBase/js/main.js' %}"></script>
		<script src="{% static 'MenuBase/js/pages/js_base.js' %}"></script>

		<!-- jquery confirm -->
		<script type="text/javascript" src="{% static 'MenuBase/vendor/libs/jquery-confirm-v3/jquery-confirm.min.js' %}"></script>
		<script src="{% static 'MenuBase/vendor/libs/jquery-ui/jquery-ui.min.js' %}"></script>

		<script type="text/javascript">
			// REGISTRAR CLIENTE
			/* FORM SUBMIT AJAX*/
			$('#form_register').on('submit', function(e) {
				e.preventDefault();
				if($('input[name="password"]').val() !== $('input[name="password2"]').val() ){
					toastr.warning('Las contraseñas no coinciden', 'Error de contraseñas')
				}else{
					var parameters = new FormData(this);
					submit_with_ajax(window.location.pathname, 'Notificación', '¿Estas seguro de realizar esta accion?', parameters, function() {
						toastr.success('Se ha registrado correctamente', 'Registro exitoso')
						window.location.replace('/accounts/login/');
					});
				}
			});

	        //Solo numeros sin puntos 
	        function Solo_Numero_ci(e){
	          var keynum = window.event ? window.event.keyCode : e.which;
	          if ((keynum == 8))
	          return true;
	          return /\d/.test(String.fromCharCode(keynum));
	        }
	        //Solo texto
			function Solo_Texto(e) {
			  var code;
			  if (!e) var e = window.event;
			  if (e.keyCode) code = e.keyCode;
			  else if (e.which) code = e.which;
			  var character = String.fromCharCode(code);
			  var AllowRegex  = /^[\ba-zA-Z\s]$/;
			  if (AllowRegex.test(character)) return true;     
			  return false; 
			}

			// solo numeros y letras sin caracteres especiales
			function Texto_Numeros(e) {
			  var code;
			  if (!e) var e = window.event;
			  if (e.keyCode) code = e.keyCode;
			  else if (e.which) code = e.which;
			  var character = String.fromCharCode(code);
			  var AllowRegex  = /^[A-Za-z0-9\s\.,-]+$/g;
			  if (AllowRegex.test(character)) return true;     
			  return false; 
			}
	    </script>
	</body>
</html>
